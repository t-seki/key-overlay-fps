<Window x:Class="KeyOverlayFPS.Layout.LayoutEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="レイアウト管理" 
        Width="700" 
        Height="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- メニューバー -->
        <Menu Grid.Row="0">
            <MenuItem Header="ファイル">
                <MenuItem Header="新規作成" Click="NewLayout_Click"/>
                <MenuItem Header="開く..." Click="OpenLayout_Click"/>
                <MenuItem Header="上書き保存" Click="SaveLayout_Click"/>
                <MenuItem Header="名前を付けて保存..." Click="SaveAsLayout_Click"/>
                <Separator/>
                <MenuItem Header="デフォルトレイアウトを適用">
                    <MenuItem Header="65%キーボード" Click="LoadDefault65_Click"/>
                    <MenuItem Header="FPSレイアウト" Click="LoadDefaultFPS_Click"/>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="表示">
                <MenuItem Header="プレビューを更新" Click="RefreshPreview_Click"/>
            </MenuItem>
        </Menu>
        
        <!-- メインコンテンツ -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- 設定パネル -->
            <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="10">
                    
                    <!-- キーボードレイアウト設定 -->
                    <GroupBox Header="キーボードレイアウト設定" Margin="0,0,0,10">
                        <StackPanel>
                            <Grid Margin="5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <Label Grid.Row="0" Grid.Column="0" Content="フォントサイズ:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="0" Grid.Column="1" x:Name="FontSizeTextBox" Margin="5,2" TextChanged="GlobalSetting_Changed"/>
                                
                                <Label Grid.Row="1" Grid.Column="0" Content="フォントファミリ:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="1" Grid.Column="1" x:Name="FontFamilyTextBox" Margin="5,2" TextChanged="GlobalSetting_Changed"/>
                                
                                <Label Grid.Row="2" Grid.Column="0" Content="キー幅:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="2" Grid.Column="1" x:Name="KeyWidthTextBox" Margin="5,2" TextChanged="GlobalSetting_Changed"/>
                                
                                <Label Grid.Row="3" Grid.Column="0" Content="キー高さ:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="3" Grid.Column="1" x:Name="KeyHeightTextBox" Margin="5,2" TextChanged="GlobalSetting_Changed"/>
                                
                                <Label Grid.Row="4" Grid.Column="0" Content="背景色:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="4" Grid.Column="1" x:Name="BackgroundColorTextBox" Margin="5,2" TextChanged="GlobalSetting_Changed"/>
                                
                                <Label Grid.Row="5" Grid.Column="0" Content="ハイライト色:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="5" Grid.Column="1" x:Name="HighlightColorTextBox" Margin="5,2" TextChanged="GlobalSetting_Changed"/>
                            </Grid>
                        </StackPanel>
                    </GroupBox>
                    
                    <!-- キーボードキー一覧 -->
                    <GroupBox Header="キーボードキー一覧" Margin="0,0,0,10">
                        <StackPanel>
                            <ListBox x:Name="ElementsListBox" Height="200" SelectionChanged="ElementsList_SelectionChanged"/>
                            <TextBlock Text="※キーボード関連のキーのみ表示されます" Margin="5" FontSize="10" Foreground="Gray"/>
                        </StackPanel>
                    </GroupBox>
                    
                    <!-- 選択キー設定 -->
                    <GroupBox Header="選択キー設定" Margin="0,0,0,10" x:Name="ElementSettingsGroup">
                        <StackPanel>
                            <Grid Margin="5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <Label Grid.Row="0" Grid.Column="0" Content="名前:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="0" Grid.Column="1" x:Name="ElementNameTextBox" Margin="5,2" TextChanged="ElementSetting_Changed"/>
                                
                                <Label Grid.Row="1" Grid.Column="0" Content="X座標:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="1" Grid.Column="1" x:Name="ElementXTextBox" Margin="5,2" TextChanged="ElementSetting_Changed"/>
                                
                                <Label Grid.Row="2" Grid.Column="0" Content="Y座標:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="2" Grid.Column="1" x:Name="ElementYTextBox" Margin="5,2" TextChanged="ElementSetting_Changed"/>
                                
                                <Label Grid.Row="3" Grid.Column="0" Content="テキスト:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="3" Grid.Column="1" x:Name="ElementTextTextBox" Margin="5,2" TextChanged="ElementSetting_Changed"/>
                                
                                <Label Grid.Row="4" Grid.Column="0" Content="幅:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="4" Grid.Column="1" x:Name="ElementWidthTextBox" Margin="5,2" TextChanged="ElementSetting_Changed"/>
                                
                                <Label Grid.Row="5" Grid.Column="0" Content="高さ:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="5" Grid.Column="1" x:Name="ElementHeightTextBox" Margin="5,2" TextChanged="ElementSetting_Changed"/>
                                
                                <Label Grid.Row="6" Grid.Column="0" Content="フォントサイズ:" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="6" Grid.Column="1" x:Name="ElementFontSizeTextBox" Margin="5,2" TextChanged="ElementSetting_Changed"/>
                                
                                <CheckBox Grid.Row="7" Grid.Column="1" x:Name="ElementVisibleCheckBox" Content="表示" Margin="5,5,5,2" Checked="ElementSetting_Changed" Unchecked="ElementSetting_Changed"/>
                            </Grid>
                        </StackPanel>
                    </GroupBox>
                    
                </StackPanel>
            </ScrollViewer>
            
            <!-- スプリッター -->
            <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch" Background="LightGray"/>
            
            <!-- プレビューエリア -->
            <GroupBox Grid.Column="2" Header="プレビュー" Margin="10">
                <ScrollViewer x:Name="PreviewScrollViewer" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                    <Canvas x:Name="PreviewCanvas" Background="Black" Width="580" Height="160"/>
                </ScrollViewer>
            </GroupBox>
            
        </Grid>
        
        <!-- ボタンエリア -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="10">
            <Button Content="適用" Click="ApplyLayout_Click" Margin="0,0,10,0" Width="80"/>
            <Button Content="キャンセル" Click="CancelLayout_Click" Margin="0,0,10,0" Width="80"/>
            <Button Content="OK" Click="OKLayout_Click" Width="80"/>
        </StackPanel>
        
    </Grid>
</Window>